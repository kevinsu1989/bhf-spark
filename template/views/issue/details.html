<article class="issue-details" issue-details id="issue-details">
    <div class="not-found" ng-show="!issue.id">
        <p>
            <i class="icon"></i>
            404 Not Found
        </p>
    </div>

    <div ng-show="issue.id">
        <div style="overflow: auto; height: 100%; position:relative;">
            <!--展示一个issue的所有内容-->
            <header ng-hide="articleOnly">
                <div class="project-name">
                    <i class="small icon cell"></i>
                    <label>{{project.title}}</label>
                </div>
                <div class="owner" dropdown data-name="issue:owner" data-text-container="label.display" data-selected="{{issue.owner}}">
                    <i class="icon small cell"></i>
                    <label class="display">{{issue.owner_name || '不指定'}}</label>
                    <project-member-dropdown data-items="{{projectMember}}"></project-member-dropdown>
                </div>
                <div class="finish-date">
                    <i class="icon small cell"></i>
                    <label>{{issue.plan_finish_time | date}}</label>
                </div>
                <div class="priority" dropdown data-name="issue:priority" data-text-container="label.display" data-selected="{{issue.priority}}">
                    <i class="icon small cell"></i>
                    <label class="display">中</label>
                    <issue-priority-dropdown data-project-id="{{issue.project_id}}" data-id="{{issue.id}}"></issue-priority-dropdown>
                </div>
                <div class="category">
                    <i class="icon small cell"></i>
                    <label>分类</label>
                </div>
                <div class="assets">
                    <i class="icon small cell"></i>
                    <label>附件</label>
                </div>
                <div class="trash">
                    <i class="icon small cell"></i>
                    <label>删除</label>
                </div>
            </header>

            <!--标题部分-->
            <div class="issue panel">
                <div class="title">
                    <div class="issue-status" dropdown data-selected="{{issue.status}}" data-name="issue:status">
                        <i class="issue-status icon small" ng-class="issue.status"></i>
                        <issue-status-dropdown></issue-status-dropdown>
                    </div>
                    <h3>{{issue.title}}</h3>

                    <div class="toolbar">
                        <a ng-click="onClickEdit($event, data)" href="javascript:void(0)" class="edit">编辑</a>
                        <a ng-click="onClickDelete($event, data)" href="javascript:void(0)" class="delete">删除</a>
                    </div>
                </div>
                <div class="sub-title">
                    <span class="creator">{{issue.creator_name || '创建者'}}</span>
                    <span class="tag">标签</span>
                    <span class="timestamp">{{issue.timestamp | date}}</span>
                    <span class="id">#{{issue.id}}</span>
                </div>
                <div class="content" ng-bind-html="issue.content | unsafe" ng-show="!editing"></div>
                <div ng-show="editing">
                    <editor name="issue"></editor>
                </div>
            </div>

            <!--附件-->
            <div class="assets panel" ng-hide="articleOnly">
                <div class="title">
                    <i class="icon small"></i>
                    <h3>附件</h3>
                </div>
                <div class="content">
                    <!--附件缩略图列表-->
                    <assets-thumbnail></assets-thumbnail>
                    <button class="create" ng-click="onClickUpload($event, issue.project_id)" upload-assets></button>
                </div>
            </div>

            <!--评论-->
            <div class="comments panel">
                <div class="title">
                    <i class="icon small"></i>
                    <h3>评论</h3>
                </div>
                <div class="content">
                    <comment-list></comment-list>
                </div>
            </div>

            <!--日志-->
            <div class="log panel" ng-hide="articleOnly">
                <div class="title">
                    <i class="icon small"></i>
                    <h3>记录</h3>
                </div>

                <div class="content">
                    <issue-log></issue-log>
                </div>
            </div>
        </div>
        <comment-editor></comment-editor>
    </div>
</article>